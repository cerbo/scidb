<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libpqxx: String escaping</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>String escaping</h1>Reveals "unescaped" version of PostgreSQL bytea string.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g9c1a379cd2ba4eea395fb79df463eb98">pqxx::escape_binary</a> (const std::string &amp;bin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g9c1a379cd2ba4eea395fb79df463eb98"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#gd40c643f4f483941c07c7f25d9091abc">pqxx::escape_binary</a> (const char bin[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#gd40c643f4f483941c07c7f25d9091abc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g67d0543fc753d81b490cb7c77205a283">pqxx::escape_binary</a> (const char bin[], size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g67d0543fc753d81b490cb7c77205a283"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#gd1faeced6ee13b17fbc3aca21712cc7c">pqxx::escape_binary</a> (const unsigned char bin[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#gd1faeced6ee13b17fbc3aca21712cc7c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g80a4bfe9b1c1b88c29d16ba06102370b">pqxx::escape_binary</a> (const unsigned char bin[], size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g80a4bfe9b1c1b88c29d16ba06102370b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g8978ff727c03a1aaaa3a9d3fd3268abf">pqxx::connection_base::esc</a> (const char str[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal on this connection.  <a href="#g8978ff727c03a1aaaa3a9d3fd3268abf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#ge711f65dd793a70629f97a2e0e54d8db">pqxx::connection_base::esc</a> (const char str[], size_t maxlen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal on this connection.  <a href="#ge711f65dd793a70629f97a2e0e54d8db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#gca9ba750fd096cfd652a4323dab3a653">pqxx::connection_base::esc</a> (const std::string &amp;str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal on this connection.  <a href="#gca9ba750fd096cfd652a4323dab3a653"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g6a8c83d3dcea7114a00c188fe6a92779">pqxx::connection_base::esc_raw</a> (const unsigned char str[], size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for use as SQL string literal on this connection.  <a href="#g6a8c83d3dcea7114a00c188fe6a92779"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00196.html#g504d44b2b133a3d606d08c6b829680b2">pqxx::connection_base::quote</a> (const T &amp;t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Represent object as SQL string, including quoting &amp; escaping.  <a href="#g504d44b2b133a3d606d08c6b829680b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g392c92f5ae4ee675dddc1e10d5d1ebfb">pqxx::transaction_base::esc</a> (const char str[]) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#g392c92f5ae4ee675dddc1e10d5d1ebfb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#gc6f7e057105ccf54bfcde01dabbec326">pqxx::transaction_base::esc</a> (const char str[], size_t maxlen) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#gc6f7e057105ccf54bfcde01dabbec326"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g94e4260c184cf6242e471659c7b288e4">pqxx::transaction_base::esc</a> (const std::string &amp;str) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#g94e4260c184cf6242e471659c7b288e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#gd8ad632a47ec00739c9c9a61452dc98d">pqxx::transaction_base::esc_raw</a> (const unsigned char str[], size_t len) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary data for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#gd8ad632a47ec00739c9c9a61452dc98d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g489c7438da9241486297a451a8579dc1">pqxx::transaction_base::esc_raw</a> (const std::string &amp;) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary data for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#g489c7438da9241486297a451a8579dc1"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00196.html#g558cf87de1ea1b3b86b5cdcc77574c57">pqxx::transaction_base::quote</a> (const T &amp;t) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Represent object as SQL string, including quoting &amp; escaping.  <a href="#g558cf87de1ea1b3b86b5cdcc77574c57"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g9c1a379cd2ba4eea395fb79df463eb98">pqxx::binarystring::escape_binary</a> (const std::string &amp;bin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g9c1a379cd2ba4eea395fb79df463eb98"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g5b230e243d4ebbe8085a8048e912601e">pqxx::binarystring::escape_binary</a> (const char bin[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g5b230e243d4ebbe8085a8048e912601e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g787364a7ae884b781b58ac248ff0925c">pqxx::binarystring::escape_binary</a> (const char bin[], size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g787364a7ae884b781b58ac248ff0925c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#g1147c3174b747009783b65981d4707f0">pqxx::binarystring::escape_binary</a> (const unsigned char bin[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#g1147c3174b747009783b65981d4707f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00196.html#geb5da84878d4ea8f902f956b8240e73e">pqxx::binarystring::escape_binary</a> (const unsigned char bin[], size_t len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Escape binary string for inclusion in SQL.  <a href="#geb5da84878d4ea8f902f956b8240e73e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Reveals "unescaped" version of PostgreSQL bytea string. 
<p>
This class represents a postgres-internal buffer containing the original, binary string represented by a field of type bytea. The raw value returned by such a field contains escape sequences for certain characters, which are filtered out by <a class="el" href="a00010.html">binarystring</a>.<p>
The resulting string is zero-terminated, but may also contain zero bytes (or indeed any other byte value) so don't assume that it can be treated as a C-style string unless you've made sure of this yourself.<p>
The <a class="el" href="a00010.html">binarystring</a> retains its value even if the <a class="el" href="a00076.html" title="Query or command result set.">result</a> it was obtained from is destroyed, but it cannot be copied or assigned.<p>
To convert the other way, i.e. from a raw series of bytes to a string suitable for inclusion as bytea values in your SQL, use the transaction's <a class="el" href="a00196.html#gd8ad632a47ec00739c9c9a61452dc98d" title="Escape binary data for use as SQL string literal in this transaction.">esc_raw()</a> functions.<p>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>This class is implemented as a reference-counting smart pointer. Copying, swapping, and destroying <a class="el" href="a00010.html">binarystring</a> objects that refer to the same underlying data block is <em>not thread-safe</em>. If you wish to pass binarystrings around between threads, make sure that each of these operations is protected against concurrency with similar operations on the same object, or other objects pointing to the same data block.</dd></dl>
Use these functions to "groom" user-provided strings before using them in your SQL statements. This reduces the chance of failures when users type unexpected characters, but more importantly, it helps prevent so-called SQL injection attacks.<p>
To understand what SQL injection vulnerabilities are and why they should be prevented, imagine you use the following SQL statement somewhere in your program:<p>
<div class="fragment"><pre class="fragment">        TX.exec(<span class="stringliteral">"SELECT number,amount "</span>
                <span class="stringliteral">"FROM accounts "</span>
                <span class="stringliteral">"WHERE allowed_to_see('"</span> + userid + <span class="stringliteral">"','"</span> + password + <span class="stringliteral">"')"</span>);
</pre></div><p>
This shows a logged-in user important information on all accounts he is authorized to view. The userid and password strings are variables entered by the user himself.<p>
Now, if the user is actually an attacker who knows (or can guess) the general shape of this SQL statement, imagine he enters the following password:<p>
<div class="fragment"><pre class="fragment">        x<span class="stringliteral">') OR ('</span>x<span class="stringliteral">' = '</span>x
</pre></div><p>
Does that make sense to you? Probably not. But if this is inserted into the SQL string by the C++ code above, the query becomes:<p>
<div class="fragment"><pre class="fragment">        SELECT number,amount
        FROM accounts
        WHERE allowed_to_see(<span class="stringliteral">'user'</span>,<span class="charliteral">'x'</span>) OR ('x' = 'x')
</pre></div><p>
Is this what you wanted to happen? Probably not! The neat allowed_to_see() clause is completely circumvented by the "&lt;tt&gt;OR ('x' = 'x')&lt;/tt&gt;" clause, which is always <code>true</code>. Therefore, the attacker will get to see all accounts in the database!<p>
To prevent this from happening, use the transaction's <a class="el" href="a00196.html#g392c92f5ae4ee675dddc1e10d5d1ebfb" title="Escape string for use as SQL string literal in this transaction.">esc()</a> function:<p>
<div class="fragment"><pre class="fragment">        TX.exec(<span class="stringliteral">"SELECT number,amount "</span>
                <span class="stringliteral">"FROM accounts "</span>
                <span class="stringliteral">"WHERE allowed_to_see('"</span> + TX.esc(userid) + <span class="stringliteral">"', "</span>
                        <span class="stringliteral">"'"</span> + TX.esc(password) + <span class="stringliteral">"')"</span>);
</pre></div><p>
Now, the quotes embedded in the attacker's string will be neatly escaped so they can't "break out" of the quoted SQL string they were meant to go into:<p>
<div class="fragment"><pre class="fragment">        SELECT number,amount
        FROM accounts
        WHERE allowed_to_see(<span class="stringliteral">'user'</span>, <span class="charliteral">'x'</span><span class="stringliteral">') OR ('</span><span class="charliteral">'x'</span><span class="stringliteral">' = '</span><span class="charliteral">'x'</span>)
</pre></div><p>
If you look carefully, you'll see that thanks to the added escape characters (a single-quote is escaped in SQL by doubling it) all we get is a very strange-looking password string--but not a change in the SQL statement. <hr><h2>Function Documentation</h2>
<a class="anchor" name="g94e4260c184cf6242e471659c7b288e4"></a><!-- doxytag: member="pqxx::transaction_base::esc" ref="g94e4260c184cf6242e471659c7b288e4" args="(const std::string &amp;str) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::transaction_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="gc6f7e057105ccf54bfcde01dabbec326"></a><!-- doxytag: member="pqxx::transaction_base::esc" ref="gc6f7e057105ccf54bfcde01dabbec326" args="(const char str[], size_t maxlen) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::transaction_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>str</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>maxlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="g392c92f5ae4ee675dddc1e10d5d1ebfb"></a><!-- doxytag: member="pqxx::transaction_base::esc" ref="g392c92f5ae4ee675dddc1e10d5d1ebfb" args="(const char str[]) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::transaction_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>str</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="gca9ba750fd096cfd652a4323dab3a653"></a><!-- doxytag: member="pqxx::connection_base::esc" ref="gca9ba750fd096cfd652a4323dab3a653" args="(const std::string &amp;str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::connection_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal on this connection. 
<p>

<p>References <a class="el" href="a00218.html#l01465">pqxx::connection_base::esc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge711f65dd793a70629f97a2e0e54d8db"></a><!-- doxytag: member="pqxx::connection_base::esc" ref="ge711f65dd793a70629f97a2e0e54d8db" args="(const char str[], size_t maxlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::connection_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>str</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>maxlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal on this connection. 
<p>

<p>References <a class="el" href="a00218.html#l00182">pqxx::connection_base::activate()</a>, and <a class="el" href="a00262.html#l00624">pqxx::internal::scoped_array&lt; T &gt;::get()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8978ff727c03a1aaaa3a9d3fd3268abf"></a><!-- doxytag: member="pqxx::connection_base::esc" ref="g8978ff727c03a1aaaa3a9d3fd3268abf" args="(const char str[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::connection_base::esc           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>str</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape string for use as SQL string literal on this connection. 
<p>

<p>Referenced by <a class="el" href="a00218.html#l01471">pqxx::connection_base::esc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g489c7438da9241486297a451a8579dc1"></a><!-- doxytag: member="pqxx::transaction_base::esc_raw" ref="g489c7438da9241486297a451a8579dc1" args="(const std::string &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::transaction_base::esc_raw           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>str</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary data for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>

<p>References <a class="el" href="a00218.html#l01477">pqxx::connection_base::esc_raw()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd8ad632a47ec00739c9c9a61452dc98d"></a><!-- doxytag: member="pqxx::transaction_base::esc_raw" ref="gd8ad632a47ec00739c9c9a61452dc98d" args="(const unsigned char str[], size_t len) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::transaction_base::esc_raw           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>str</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary data for use as SQL string literal in this <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>
Raw, binary data is treated differently from regular strings. Binary strings are never interpreted as text, so they may safely include byte values or byte sequences that don't happen to represent valid characters in the character encoding being used.<p>
The binary string does not stop at the first zero byte, as is the case with textual strings. Instead, they may contain zero bytes anywhere. If it happens to contain bytes that look like quote characters, or other things that can disrupt their use in SQL queries, they will be replaced with special escape sequences. 
</div>
</div><p>
<a class="anchor" name="g6a8c83d3dcea7114a00c188fe6a92779"></a><!-- doxytag: member="pqxx::connection_base::esc_raw" ref="g6a8c83d3dcea7114a00c188fe6a92779" args="(const unsigned char str[], size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::connection_base::esc_raw           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>str</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for use as SQL string literal on this connection. 
<p>

<p>References <a class="el" href="a00218.html#l00182">pqxx::connection_base::activate()</a>, and <a class="el" href="a00262.html#l00583">pqxx::internal::PQAlloc&lt; T, DELETER &gt;::get()</a>.</p>

<p>Referenced by <a class="el" href="a00257.html#l00223">pqxx::transaction_base::esc_raw()</a>.</p>

</div>
</div><p>
<a class="anchor" name="geb5da84878d4ea8f902f956b8240e73e"></a><!-- doxytag: member="pqxx::binarystring::escape_binary" ref="geb5da84878d4ea8f902f956b8240e73e" args="(const unsigned char bin[], size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [related, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000005">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="g1147c3174b747009783b65981d4707f0"></a><!-- doxytag: member="pqxx::binarystring::escape_binary" ref="g1147c3174b747009783b65981d4707f0" args="(const unsigned char bin[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [related, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000004">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="g787364a7ae884b781b58ac248ff0925c"></a><!-- doxytag: member="pqxx::binarystring::escape_binary" ref="g787364a7ae884b781b58ac248ff0925c" args="(const char bin[], size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [related, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5b230e243d4ebbe8085a8048e912601e"></a><!-- doxytag: member="pqxx::binarystring::escape_binary" ref="g5b230e243d4ebbe8085a8048e912601e" args="(const char bin[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [related, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="g9c1a379cd2ba4eea395fb79df463eb98"></a><!-- doxytag: member="pqxx::binarystring::escape_binary" ref="g9c1a379cd2ba4eea395fb79df463eb98" args="(const std::string &amp;bin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>bin</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [related, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="g80a4bfe9b1c1b88c29d16ba06102370b"></a><!-- doxytag: member="pqxx::escape_binary" ref="g80a4bfe9b1c1b88c29d16ba06102370b" args="(const unsigned char bin[], size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000005">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

<p>References <a class="el" href="a00262.html#l00583">pqxx::internal::PQAlloc&lt; T, DELETER &gt;::get()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd1faeced6ee13b17fbc3aca21712cc7c"></a><!-- doxytag: member="pqxx::escape_binary" ref="gd1faeced6ee13b17fbc3aca21712cc7c" args="(const unsigned char bin[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000004">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

<p>References <a class="el" href="a00196.html#g9c1a379cd2ba4eea395fb79df463eb98">pqxx::escape_binary()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g67d0543fc753d81b490cb7c77205a283"></a><!-- doxytag: member="pqxx::escape_binary" ref="g67d0543fc753d81b490cb7c77205a283" args="(const char bin[], size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

<p>References <a class="el" href="a00196.html#g9c1a379cd2ba4eea395fb79df463eb98">pqxx::escape_binary()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd40c643f4f483941c07c7f25d9091abc"></a><!-- doxytag: member="pqxx::escape_binary" ref="gd40c643f4f483941c07c7f25d9091abc" args="(const char bin[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string pqxx::escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>bin</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

<p>References <a class="el" href="a00196.html#g9c1a379cd2ba4eea395fb79df463eb98">pqxx::escape_binary()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9c1a379cd2ba4eea395fb79df463eb98"></a><!-- doxytag: member="pqxx::escape_binary" ref="g9c1a379cd2ba4eea395fb79df463eb98" args="(const std::string &amp;bin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string escape_binary           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>bin</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Escape binary string for inclusion in SQL. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Use the transaction's esc_raw() functions instead </dd></dl>

<p>Referenced by <a class="el" href="a00205.html#l00170">pqxx::escape_binary()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g558cf87de1ea1b3b86b5cdcc77574c57"></a><!-- doxytag: member="pqxx::transaction_base::quote" ref="g558cf87de1ea1b3b86b5cdcc77574c57" args="(const T &amp;t) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::transaction_base::quote           </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Represent object as SQL string, including quoting &amp; escaping. 
<p>
Nulls are recognized and represented as SQL nulls. 
</div>
</div><p>
<a class="anchor" name="g504d44b2b133a3d606d08c6b829680b2"></a><!-- doxytag: member="pqxx::connection_base::quote" ref="g504d44b2b133a3d606d08c6b829680b2" args="(const T &amp;t)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std ::string pqxx::connection_base::quote           </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Represent object as SQL string, including quoting &amp; escaping. 
<p>
Nulls are recognized and represented as SQL nulls. 
<p>References <a class="el" href="a00241.html#l01012">pqxx::to_string()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 15 18:22:46 2010 for libpqxx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
