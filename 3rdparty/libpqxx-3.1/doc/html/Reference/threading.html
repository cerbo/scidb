<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libpqxx: Thread safety</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="threading">Thread safety </a></h1>This library does not contain any locking code to protect objects against simultaneous modification in multi-threaded programs. There are many different threading interfaces and libpqxx does not dictate your choice.<p>
Therefore it is up to you, the user of the library, to ensure that your threaded client programs perform no conflicting operations concurrently.<p>
The library does try to avoid non-obvious unsafe operations and so does the underlying libpq. Here's what you should do to keep your threaded libpqxx application safe:<p>
<ul>
<li>Treat a connection, together with any and all objects related to it, as a "world" of its own. You should generally make sure that the same "world" is never accessed concurrently by multiple threads. There are a few cases where you don't need to be this careful, however; see below.</li>
</ul>
<ul>
<li>Result sets (<a class="el" href="a00076.html" title="Query or command result set.">pqxx::result</a>) and binary data (<a class="el" href="a00010.html">pqxx::binarystring</a>) are special. Copying these objects is very cheap, and you can give the copy to another thread. Just make sure that no other thread accesses the same copy when it's being assigned to, swapped, cleared, or destroyed.</li>
</ul>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>Prior to libpqxx 3.1, or in C++ environments without the standard <code>"shared_ptr"</code> smart pointer type, copying, assigning, or destroying a <a class="el" href="a00076.html" title="Query or command result set.">pqxx::result</a> or <a class="el" href="a00010.html">pqxx::binarystring</a> could also affect any other other object of the same type referring to the same underlying data.</dd></dl>
Use <code><a class="el" href="a00171.html#ac7c904372c0bffcd8c8b121f2c3f13e" title="Describe thread safety available in this build.">pqxx::describe_thread_safety</a></code> to find out at runtime what level of thread safety is implemented in your build and version of libpqxx. It returns a <a class="el" href="a00102.html" title="Descriptor of library&#39;s thread-safety model.">pqxx::thread_safety_model</a> describing what you can and cannot rely on. A command-line utility <code>tools/pqxxthreadsafety</code> prints out the same information. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 15 18:22:46 2010 for libpqxx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
