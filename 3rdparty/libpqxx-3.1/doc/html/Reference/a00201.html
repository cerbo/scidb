<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libpqxx: Notifications and Listeners</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Notifications and Listeners</h1>"Observer" base class for notifications.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
To listen on a notification issued using the NOTIFY command, derive your own class from <a class="el" href="a00058.html">notify_listener</a> and define its function call operator to perform whatever action you wish to take when the given notification arrives. Then create an object of that class and pass it to your connection. DO NOT use raw SQL to listen for notifications, or your attempts to listen won't be resumed when a connection fails--and you'll have no way to notice.<p>
Notifications never arrive inside a backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. Therefore, unless you may be using a <a class="el" href="a00055.html">nontransaction</a> when a notification arrives, you are free to open a <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> of your own inside your listener's function invocation operator.<p>
Notifications you are listening for may arrive anywhere within libpqxx code, but be aware that <b>PostgreSQL</b> <b>defers</b> <b>notifications</b> <b>occurring</b> <b>inside</b> <b>transactions</b>. (This was done for excellent reasons; just think about what happens if the <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> where you happen to handle an incoming notification is later rolled back for other reasons). So if you're keeping a <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> open, don't expect any of your listeners on the same connection to be notified.<p>
Multiple listeners on the same connection may listen on a notification of the same name. An incoming notification is processed by invoking all listeners (zero or more) of the same name. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 15 18:22:46 2010 for libpqxx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
