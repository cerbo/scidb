<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libpqxx: pqxx::transactor&lt; TRANSACTION &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="a00171.html">pqxx</a>::<a class="el" href="a00107.html">transactor</a>
  </div>
</div>
<div class="contents">
<h1>pqxx::transactor&lt; TRANSACTION &gt; Class Template Reference</h1><!-- doxytag: class="pqxx::transactor" --><code>#include &lt;<a class="el" href="a00259.html">transactor.hxx</a>&gt;</code>
<p>

<p>
<a href="a00651.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#326761951cbf1a7b38ee912a4ca3556f">transactor</a> (const std::string &amp;TName=&quot;transactor&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#b02770d55fdda6bc4e5b4323aa53e4e8">operator()</a> (TRANSACTION &amp;T)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridable <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> definition; insert your database code here.  <a href="#b02770d55fdda6bc4e5b4323aa53e4e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#11e2fe0df76ccba33e0c6cd7b8f6da2d">on_abort</a> (const char[])  throw ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Optional overridable function to be called if <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> is aborted.  <a href="#11e2fe0df76ccba33e0c6cd7b8f6da2d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#acc3fb9eb7993788cafe66aa88d87d6b">on_commit</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Optional overridable function to be called after successful commit.  <a href="#acc3fb9eb7993788cafe66aa88d87d6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#de15ec930b8c4baee2c22ceec5af9c2d">on_doubt</a> ()  throw ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overridable function to be called when "in doubt" about outcome.  <a href="#de15ec930b8c4baee2c22ceec5af9c2d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00107.html#066e30c769dbc33252a9ee7024ef46d8">Name</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The transactor's name.  <a href="#066e30c769dbc33252a9ee7024ef46d8"></a><br></td></tr>
</table>
<h3>template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt;<br>
 class pqxx::transactor&lt; TRANSACTION &gt;</h3>

<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="326761951cbf1a7b38ee912a4ca3556f"></a><!-- doxytag: member="pqxx::transactor::transactor" ref="326761951cbf1a7b38ee912a4ca3556f" args="(const std::string &amp;TName=&quot;transactor&quot;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::<a class="el" href="a00107.html">transactor</a>           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>TName</em> = <code>&quot;transactor&lt;&nbsp;TRANSACTION&nbsp;&gt;&quot;</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b02770d55fdda6bc4e5b4323aa53e4e8"></a><!-- doxytag: member="pqxx::transactor::operator()" ref="b02770d55fdda6bc4e5b4323aa53e4e8" args="(TRANSACTION &amp;T)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::operator()           </td>
          <td>(</td>
          <td class="paramtype">TRANSACTION &amp;&nbsp;</td>
          <td class="paramname"> <em>T</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Overridable <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> definition; insert your database code here. 
<p>
The operation will be retried if the connection to the backend is lost or the operation fails, but not if the connection is broken in such a way as to leave the library in doubt as to whether the operation succeeded. In that case, an <a class="el" href="a00039.html" title="&quot;Help, I don&#39;t know whether transaction was committed successfully!&quot;...">in_doubt_error</a> will be thrown.<p>
Recommended practice is to allow this operator to modify only the <a class="el" href="a00107.html">transactor</a> itself, and the dedicated <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> object it is passed as an argument. This is what makes side effects, retrying etc. controllable in the <a class="el" href="a00107.html">transactor</a> framework. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>Dedicated <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> context created to perform this operation. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="11e2fe0df76ccba33e0c6cd7b8f6da2d"></a><!-- doxytag: member="pqxx::transactor::on_abort" ref="11e2fe0df76ccba33e0c6cd7b8f6da2d" args="(const char[])" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::on_abort           </td>
          <td>(</td>
          <td class="paramtype">const &nbsp;</td>
          <td class="paramname"> <em>char</em>[]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Optional overridable function to be called if <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> is aborted. 
<p>
This need not imply complete <a class="el" href="a00032.html" title="Run-time failure encountered by libpqxx, similar to std::runtime_error.">failure</a>; the <a class="el" href="a00107.html">transactor</a> will automatically retry the operation a number of times before giving up. <a class="el" href="a00107.html#11e2fe0df76ccba33e0c6cd7b8f6da2d" title="Optional overridable function to be called if transaction is aborted.">on_abort()</a> will be called for each of the failed attempts.<p>
One parameter is passed in by the framework: an error string describing why the <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> failed. This will also be logged to the connection's notice processor. 
</div>
</div><p>
<a class="anchor" name="acc3fb9eb7993788cafe66aa88d87d6b"></a><!-- doxytag: member="pqxx::transactor::on_commit" ref="acc3fb9eb7993788cafe66aa88d87d6b" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::on_commit           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Optional overridable function to be called after successful commit. 
<p>
If your <a class="el" href="a00107.html#acc3fb9eb7993788cafe66aa88d87d6b" title="Optional overridable function to be called after successful commit.">on_commit()</a> throws an exception, the actual back-end <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> will remain committed, so any changes in the database remain regardless of how this function terminates. 
</div>
</div><p>
<a class="anchor" name="de15ec930b8c4baee2c22ceec5af9c2d"></a><!-- doxytag: member="pqxx::transactor::on_doubt" ref="de15ec930b8c4baee2c22ceec5af9c2d" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::on_doubt           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Overridable function to be called when "in doubt" about outcome. 
<p>
This may happen if the connection to the backend is lost while attempting to commit. In that case, the backend may have committed the <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> but is unable to confirm this to the frontend; or the <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> may have failed, causing it to be rolled back, but again without acknowledgement to the client program. The best way to deal with this situation is typically to wave red flags in the user's face and ask him to investigate.<p>
The <a class="el" href="a00084.html" title="Slightly slower, better-fortified version of transaction.">robusttransaction</a> class is intended to reduce the chances of this error occurring, at a certain cost in performance. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="a00084.html" title="Slightly slower, better-fortified version of transaction.">robusttransaction</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="066e30c769dbc33252a9ee7024ef46d8"></a><!-- doxytag: member="pqxx::transactor::Name" ref="066e30c769dbc33252a9ee7024ef46d8" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TRANSACTION = transaction&lt;read_committed&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std ::string <a class="el" href="a00107.html">pqxx::transactor</a>&lt; TRANSACTION &gt;::Name           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The transactor's name. 
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="a00259.html">transactor.hxx</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 15 18:22:53 2010 for libpqxx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
