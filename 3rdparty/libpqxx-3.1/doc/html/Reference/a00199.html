<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libpqxx: Transaction classes</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Transaction classes</h1>Abstract base class responsible for bracketing a backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html">pqxx::basic_robusttransaction</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00084.html">pqxx::robusttransaction&lt; ISOLATIONLEVEL &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Slightly slower, better-fortified version of <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="a00084.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html">pqxx::basic_transaction</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00104.html">pqxx::transaction&lt; ISOLATIONLEVEL, READWRITE &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard back-end <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>, templatized on isolation level.  <a href="a00104.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef transaction&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00199.html#g82685329d6fd91f5ab30772d266fe5f0">pqxx::work</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bog-standard, default <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> type.  <a href="#g82685329d6fd91f5ab30772d266fe5f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef transaction<br>
&lt; read_committed, read_only &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00199.html#gb81d0f16865bb70a79d4acb0d0657259">pqxx::read_transaction</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read-only <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>.  <a href="#gb81d0f16865bb70a79d4acb0d0657259"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Abstract base class responsible for bracketing a backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>
Interface definition (and common code) for "transaction" classes.<p>
Simple "transaction" class offering no transactional integrity.<p>
Use a dbtransaction-derived object such as "work" (transaction&lt;&gt;) to enclose operations on a database in a single "unit of work." This ensures that the whole series of operations either succeeds as a whole or fails completely. In no case will it leave half-finished work behind in the database.<p>
Once processing on a <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> has succeeded and any changes should be allowed to become permanent in the database, call commit(). If something has gone wrong and the changes should be forgotten, call abort() instead. If you do neither, an implicit abort() is executed at destruction time.<p>
It is an error to abort a <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> that has already been committed, or to commit a <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> that has already been aborted. Aborting an already aborted <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> or committing an already committed one has been allowed to make errors easier to deal with. Repeated aborts or commits have no effect after the first one.<p>
Database transactions are not suitable for guarding long-running processes. If your <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> code becomes too long or too complex, please consider ways to break it up into smaller ones. There's no easy, general way to do this since application-specific considerations become important at this point.<p>
The actual operations for beginning and committing/aborting the backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> are implemented by a derived class. The implementing concrete class must also call Begin() and End() from its constructors and destructors, respectively, and implement do_exec().<p>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>Read-only transactions require backend version 8.0 or better. On older backends, these transactions will be able to modify the database. Even if you have a newer server version, it is not wise to rely on read-only transactions alone to enforce a security model.</dd></dl>
<a class="el" href="a00055.html">nontransaction</a>, like <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> or any other transaction_base-derived class, provides access to a database through a connection. Unlike its siblings, however, <a class="el" href="a00055.html">nontransaction</a> does not maintain any kind of transactional integrity. This may be useful eg. for read-only access to the database that does not require a consistent, atomic view on its data; or for operations that are not allowed within a backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>, such as creating tables.<p>
For queries that update the database, however, a real <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> is likely to be faster unless the <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> consists of only a single record update.<p>
Also, you can keep a <a class="el" href="a00055.html">nontransaction</a> open for as long as you like. Actual back-end transactions are limited in lifespan, and will sometimes fail just because they took too long to execute or were left idle for too long. This will not happen with a <a class="el" href="a00055.html">nontransaction</a> (although the connection may still time out, e.g. when the network is unavailable for a very long time).<p>
Any query executed in a <a class="el" href="a00055.html">nontransaction</a> is committed immediately, and neither commit() nor abort() has any effect.<p>
Database features that require a backend <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>, such as cursors or large objects, will not work in a <a class="el" href="a00055.html">nontransaction</a>.<p>
All database access must be channeled through one of these classes for safety, although not all implementations of this interface need to provide full transactional integrity.<p>
Several implementations of this interface are shipped with libpqxx, including the plain <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> class, the entirely unprotected <a class="el" href="a00055.html">nontransaction</a>, and the more cautions <a class="el" href="a00084.html" title="Slightly slower, better-fortified version of transaction.">robusttransaction</a>. <hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gb81d0f16865bb70a79d4acb0d0657259"></a><!-- doxytag: member="pqxx::read_transaction" ref="gb81d0f16865bb70a79d4acb0d0657259" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef transaction&lt;read_committed, read_only&gt; <a class="el" href="a00104.html">pqxx::read_transaction</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read-only <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a>. 
<p>

</div>
</div><p>
<a class="anchor" name="g82685329d6fd91f5ab30772d266fe5f0"></a><!-- doxytag: member="pqxx::work" ref="g82685329d6fd91f5ab30772d266fe5f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef transaction <a class="el" href="a00104.html">pqxx::work</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bog-standard, default <a class="el" href="a00104.html" title="Standard back-end transaction, templatized on isolation level.">transaction</a> type. 
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 15 18:22:46 2010 for libpqxx by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
